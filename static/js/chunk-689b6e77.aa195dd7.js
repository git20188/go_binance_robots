(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-689b6e77"],{1:function(e,t){},"16dd":function(e,t,i){"use strict";var r=i("38e0"),n=i("9648"),o=i("39d3"),a=i("87ef"),s=i("ad41"),l=[],c=l.sort,u=a((function(){l.sort(void 0)})),d=a((function(){l.sort(null)})),p=s("sort"),f=u||!d||!p;r({target:"Array",proto:!0,forced:f},{sort:function(e){return void 0===e?c.call(o(this)):c.call(o(this),n(e))}})},"2ec0":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticStyle:{"margin-bottom":"10px"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:e.$t("trade.coin")},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.symbol,callback:function(t){e.$set(e.listQuery,"symbol",t)},expression:"listQuery.symbol"}}),i("el-select",{staticClass:"filter-item",staticStyle:{width:"75px"},attrs:{clearable:"",size:"mini",placeholder:"status"},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},[i("el-option",{attrs:{label:e.$t("table.all"),value:"all"}}),i("el-option",{attrs:{label:e.$t("table.open"),value:"open"}}),i("el-option",{attrs:{label:e.$t("table.close"),value:"close"}})],1),i("el-select",{staticClass:"filter-item",staticStyle:{width:"75px"},attrs:{clearable:"",size:"mini",placeholder:"position_side"},model:{value:e.listQuery.position_side,callback:function(t){e.$set(e.listQuery,"position_side",t)},expression:"listQuery.position_side"}},[i("el-option",{attrs:{label:e.$t("table.all"),value:"all"}}),i("el-option",{attrs:{label:e.$t("trade.long"),value:"LONG"}}),i("el-option",{attrs:{label:e.$t("trade.short"),value:"SHORT"}})],1),i("el-date-picker",{staticClass:"filter-item",attrs:{size:"mini",type:"datetime",placeholder:e.$t("table.startTime"),"picker-options":e.pickerOptions},model:{value:e.listQuery.start_time,callback:function(t){e.$set(e.listQuery,"start_time",t)},expression:"listQuery.start_time"}}),i("el-date-picker",{staticClass:"filter-item",attrs:{size:"mini",type:"datetime",placeholder:e.$t("table.endTime"),"picker-options":e.pickerOptions},model:{value:e.listQuery.end_time,callback:function(t){e.$set(e.listQuery,"end_time",t)},expression:"listQuery.end_time"}}),i("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"primary",icon:"el-icon-search",loading:e.listLoading},on:{click:e.handleFilter}},[e._v(e._s(e.$t("table.search")))]),i("el-button",{attrs:{type:"danger",size:"mini",loading:e.listLoading},on:{click:function(t){return e.deleteAll()}}},[e._v(" "+e._s(e.$t("table.deleteAll"))+" ")]),i("div",{staticStyle:{float:"right","margin-right":"10px"}},[e._v(e._s(e.$t("trade.nowProfit"))+": "+e._s(e.allProfit))])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"",size:"mini","row-key":e.rowKey,"expand-row-keys":e.expandKeys,"highlight-current-row":""},on:{"sort-change":e.sortChange}},[i("el-table-column",{attrs:{label:e.$t("trade.coin"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.symbol)+" ")]}}])}),i("el-table-column",{attrs:{label:e.$t("trade.positionSide"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["LONG"===t.row.position_side?i("span",{staticStyle:{color:"green"}},[e._v(e._s(e.$t("trade."+t.row.position_side.toLowerCase())))]):i("span",{staticStyle:{color:"red"}},[e._v(e._s(e.$t("trade."+t.row.position_side.toLowerCase())))])]}}])}),i("el-table-column",{attrs:{label:e.$t("trade.amount"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.position_amt)+" ")]}}])}),i("el-table-column",{attrs:{label:e.$t("trade.usdt"),align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.usdt)+" ")]}}])}),i("el-table-column",{attrs:{label:e.$t("trade.leverage"),align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.leverage)+" ")]}}])}),i("el-table-column",{attrs:{label:e.$t("trade.price"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.price)+" ")]}}])}),i("el-table-column",{attrs:{label:e.$t("trade.now_price"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.close_profit<0?i("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.now_price))]):i("span",{staticStyle:{color:"green"}},[e._v(e._s(t.row.now_price))])]}}])}),i("el-table-column",{attrs:{label:e.$t("trade.profit"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.close_profit?i("span",[e._v("-")]):t.row.close_profit<0?i("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.close_profit))]):i("span",{staticStyle:{color:"green"}},[e._v(e._s(t.row.close_profit))])]}}])}),i("el-table-column",{attrs:{label:e.$t("position.nowProfit"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.profit_percent?i("span",[e._v("-")]):t.row.profit_percent<0?i("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.profit_percent))]):i("span",{staticStyle:{color:"green"}},[e._v(e._s(t.row.profit_percent))])]}}])}),i("el-table-column",{attrs:{label:e.$t("trade.close_price"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"!==t.row.close_price?t.row.close_price:"-")+" ")]}}])}),i("el-table-column",{attrs:{label:e.$t("trade.period"),align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.createTime===t.row.updateTime?"-":e.toPeriod(t.row.updateTime,t.row.createTime))+" ")]}}])}),i("el-table-column",{attrs:{label:e.$t("trade.time"),align:"center",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.parseTime(t.row.createTime))+" ")]}}])}),i("el-table-column",{attrs:{label:e.$t("table.actions"),align:"center",width:"80","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.del(r)}}},[e._v(e._s(e.$t("table.delete"))+" ")])]}}])}),i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"info-table-expand",attrs:{"label-position":"left"}},[i("el-form-item",{attrs:{label:""+e.$t("trade.open_strategy")}},[i("codemirror",{staticStyle:{width:"100%"},attrs:{value:t.row.open_strategy,options:e.cmOptions,disabled:""}})],1),t.row.close_strategy?i("el-form-item",{attrs:{label:""+e.$t("trade.close_strategy")}},[i("codemirror",{staticStyle:{width:"100%"},attrs:{value:t.row.close_strategy,options:e.cmOptions}})],1):e._e()],1)]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1)},n=[],o=i("8204"),a=i("dd36"),s=i("fee1"),l=(i("e168"),i("4cc3"),i("8b03"),i("16dd"),i("40a4"),i("374d"),i("5227"),i("90c8"),i("fa87"),i("04b0"),i("b775"));function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(l["a"])({url:"/test-strategy-results",method:"get",params:e})}function u(){return Object(l["a"])({url:"/test-strategy-results",method:"delete"})}function d(e){return Object(l["a"])({url:"/test-strategy-results/".concat(e),method:"delete"})}var p=i("333d"),f=i("ed08"),m=i("1888"),g=i("1ca5"),_=(i("7392"),i("cedf"),i("d8c5"),i("8f95"),i("31af"),i("e83b"),i("8961"),i("a7ed"),i("cb97"),i("0c7b"),i("065a"),i("5ca6"),i("2399"),i("67ed"),{components:{Pagination:p["a"],codemirror:g["codemirror"]},data:function(){return{cmOptions:{tabSize:2,mode:"text/x-ttcn-cfg",theme:"monokai",lineNumbers:!0,line:!0,foldGutter:!0,lineWrapping:!0,autoFormatJson:!0,jsonIndentation:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"],extraKeys:{Tab:"autocomplete"}},pickerOptions:{shortcuts:[{text:this.$t("table.today"),onClick:function(e){e.$emit("pick",new Date)}},{text:this.$t("table.yesterday"),onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:this.$t("table.lastWeek"),onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},list:[],total:0,listQuery:{page:1,limit:200,sort:"+",start_time:void 0,end_time:void 0,symbol:void 0,type:"",position_side:""},listLoading:!1,rowKey:function(e){return e.symbol+e.id},expandKeys:[]}},computed:{allProfit:function(){var e=this.list.reduce((function(e,t){return e+Number(t.close_profit)}),0);return Object(m["a"])(e,2)}},created:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=localStorage.getItem("test_futures_strategy_search"),i&&(i=JSON.parse(i),i.start_time&&(i.start_time=new Date(i.start_time)),i.end_time&&(i.end_time=new Date(i.end_time)),e.listQuery=i),t.next=4,e.getList();case 4:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){},methods:{parseTime:f["c"],toPeriod:function(e,t){var i=(e-t)/1e3/60,r=Math.floor(i/60),n=Math.floor(i%60);return"".concat(this.padTo2Digits(r),":").concat(this.padTo2Digits(n))},padTo2Digits:function(e){return e.toString().padStart(2,"0")},round:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Object(m["a"])(e,t)},profitPercent:function(e){if("0"===e.close_price){if("LONG"===e.position_side)return(e.now_price-e.price)/e.now_price*e.leverage*100;if("SHORT"===e.position_side)return-(e.now_price-e.price)/e.now_price*e.leverage*100}return"LONG"===e.position_side?(e.close_price-e.price)/e.close_price*e.leverage*100:"SHORT"===e.position_side?-(e.close_price-e.price)/e.close_price*e.leverage*100:void 0},expandChange:function(e,t){this.expandKeys=t.map((function(e){return e.symbol}))},sortChange:function(e){var t=e.order;this.listQuery.sort="ascending"===t?"+":"-",this.getList()},getList:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var i,r,n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return localStorage.setItem("test_futures_strategy_search",JSON.stringify(e.listQuery)),e.listLoading=!0,t.prev=2,t.next=5,c(Object(o["a"])(Object(o["a"])({},e.listQuery),{},{start_time:e.listQuery.start_time?+e.listQuery.start_time:void 0,end_time:e.listQuery.end_time?+e.listQuery.end_time:void 0}));case 5:r=t.sent,n=r.data,e.list=(null!==(i=n.list)&&void 0!==i?i:[]).map((function(t){return t.profit_percent=e.round(e.profitPercent(t)),"0"===t.close_profit&&(t.close_profit=e.round((t.now_price-t.price)*t.position_amt)),t})),e.total=n.total,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0);case 14:return t.prev=14,e.listLoading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))()},handleFilter:function(){this.listQuery.page=1,this.getList()},deleteAll:function(){var e=this;this.$confirm("".concat(this.$t("table.confirmDeleteAll"))).then(Object(s["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u();case 3:return e.$message({message:e.$t("table.actionSuccess"),type:"success"}),t.next=6,e.getList();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message({message:e.$t("table.actionFail"),type:"success"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).catch((function(){}))},del:function(e){var t=this;return Object(s["a"])(Object(a["a"])().mark((function i(){return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,d(e.id);case 3:return t.$message({message:t.$t("table.actionSuccess"),type:"success"}),i.next=6,t.getList();case 6:i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](0),t.$message({message:t.$t("table.actionFail"),type:"success"});case 11:case"end":return i.stop()}}),i,null,[[0,8]])})))()}}}),b=_,y=(i("7634"),i("9bf6")),h=Object(y["a"])(b,r,n,!1,null,"7b611cde",null);t["default"]=h.exports},"333d":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[i("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];i("374d");Math.easeInOutQuad=function(e,t,i,r){return e/=r/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function a(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,i){var r=s(),n=e-r,l=20,c=0;t="undefined"===typeof t?500:t;var u=function(){c+=l;var e=Math.easeInOutQuad(c,r,n,t);a(e),c<t?o(u):i&&"function"===typeof i&&i()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,50,100,200,500]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},u=c,d=(i("c9a5"),i("9bf6")),p=Object(d["a"])(u,r,n,!1,null,"62e794ce",null);t["a"]=p.exports},"6e14":function(e,t,i){},7634:function(e,t,i){"use strict";i("6e14")},c9a5:function(e,t,i){"use strict";i("dc4d")},dc4d:function(e,t,i){}}]);